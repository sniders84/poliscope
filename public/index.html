<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Your Officials</title>
  <!-- Main stylesheet with cache busting -->
  <link rel="stylesheet" href="style.css?v=2025-12-17-0715" />
  <link rel="icon" href="favicon.ico" onerror="this.href='data:,';" />
  <style>
    /* --- Base page styles --- */
    body {
      margin: 0;
      background-color: #1f1f1f;
      color: #fff;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
    }
    /* --- Header layout --- */
    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      background-color: #2b2b2b;
      border-bottom: 1px solid #444;
      padding: 10px;
      position: sticky;
      top: 0;
      z-index: 900;
    }
    /* Left: hamburger */
    .header-left { flex: 0 0 auto; }
    #hamburger {
      font-size: 24px;
      background: none;
      border: 1px solid #444;
      color: #fff;
      cursor: pointer;
      border-radius: 6px;
      width: 40px;
      height: 40px;
      display: grid;
      place-items: center;
      transition: background-color 0.2s ease, transform 0.2s ease;
    }
    #hamburger:hover { background-color: #0066cc; transform: scale(1.05); }
    /* Center: logo */
    .header-center { flex: 1 1 auto; text-align: center; }
    .logo { max-height: 100px; width: auto; max-width: 100%; object-fit: contain; }
    /* Right: search + dropdown */
    .header-right { flex: 0 0 auto; display: flex; align-items: center; gap: 8px; }
    #search-bar {
      padding: 8px 10px; border-radius: 6px; border: 1px solid #444;
      background: #1f1f1f; color: #fff;
    }
    #state-dropdown {
      padding: 6px 8px; border-radius: 6px; border: 1px solid #444;
      background: #1f1f1f; color: #fff;
    }
    /* Hamburger menu styles */
    #hamburger-menu {
      position: fixed;
      top: 0;
      left: -260px;
      width: 260px;
      height: 100%;
      background-color: #2b2b2b;
      overflow-y: auto;
      transition: left 0.3s ease;
      z-index: 1000;
      border-right: 1px solid #444;
    }
    #hamburger-menu.open { left: 0; }
    #hamburger-menu ul { list-style: none; padding: 0; margin: 0; }
    #hamburger-menu li { border-bottom: 1px solid #444; }
    #hamburger-menu a {
      display: block; padding: 12px; color: #fff; text-decoration: none;
    }
    #hamburger-menu a:hover { background-color: #0066cc; }
    /* Carousel styles */
    .carousel { position: relative; overflow: hidden; }
    .carousel-track { display: flex; gap: 12px; transition: transform 0.3s ease; }
    .carousel-card { min-width: 298px; background: #262626; border: 1px solid #444; border-radius: 8px; overflow: hidden; }
    .carousel-img { width: 100%; height: 160px; object-fit: cover; display: block; }
    .carousel-controls { display: flex; gap: 8px; margin-top: 8px; }
    .carousel-btn { padding: 6px 10px; border-radius: 6px; border: 1px solid #444; background: #1f1f1f; color: #fff; cursor: pointer; }
  </style>
</head>
<body>
  <!-- Header -->
  <header>
    <div class="header-left">
      <button id="hamburger" aria-label="Open menu">&#9776;</button>
    </div>
    <div class="header-center">
      <img src="assets/electorate-logo.png" alt="Logo" class="logo" style="max-height: 200px; height: auto; width: auto;" />
    </div>
  </header>

  <!-- Slide-out hamburger menu – FIXED: no onclicks, JS handles clicks -->
  <nav id="hamburger-menu" aria-label="Primary">
    <ul>
      <li><a href="#startup-hub">Home Hub</a></li>
      <li><a href="#podcasts-shows">Podcasts & Shows</a></li>
      <li><a href="#learning-resources">Learning Resources</a></li>
      <li><a href="#civic">Civic Intelligence</a></li>
      <li><a href="#polls">Polls & Elections</a></li>
      <li><a href="#my-officials">My Officials</a></li>
      <li><a href="#ratings">Ratings/Rankings</a></li>
      <li><a href="#voting">Voting</a></li>
      <li><a href="#citizenship">Citizenship/Immigration</a></li>
      <li><a href="#organizations">Political Groups</a></li>
      <li><a href="#community">Community</a></li>
    </ul>
  </nav>

  <main>
    <!-- Startup Hub Tab -->
    <section id="startup-hub" class="tab-content" style="display: block;"> <!-- Default visible -->
      <h2>Home Hub</h2>
      <!-- National Broadcasting Networks -->
      <div id="national-networks" class="category-section">
        <h2>National Broadcasting Networks</h2>
        <div class="card-grid" id="network-cards">
          <div class="network-card" data-network="livenowfox">
            <a href="https://www.livenowfox.com/live" target="_blank" rel="noopener noreferrer">
              <div class="logo-wrapper">
                <img src="/assets/livenowfox.png" alt="LiveNOW FOX Logo" class="network-logo">
              </div>
              <h3>LiveNOW from FOX</h3>
              <p>Raw & Unfiltered News 24/7 Live News Stream.</p>
            </a>
          </div>
          <!-- ... all other network cards unchanged ... -->
        </div>
      </div>
      <!-- Single feed viewer -->
      <div id="feed-viewer" class="feed-viewer">
        <h3 id="feed-title">Select a network to view stories</h3>
        <div class="story-grid" id="feed-stories">
          <!-- RSS feed stories will populate here -->
        </div>
      </div>
      <!-- Global Politics & World News -->
      <div id="world-news" class="hub-section">
        <h2>Global Politics & World News</h2>
        <div id="world-news-carousel" class="carousel"></div>
        <div class="carousel-controls">
          <button class="carousel-btn prev" data-target="world-news-carousel">&#9664;</button>
          <button class="carousel-btn next" data-target="world-news-carousel">&#9654;</button>
        </div>
      </div>
      <!-- Finance & Markets -->
      <div id="finance-markets" class="hub-section">
        <h2>Finance & Markets</h2>
        <div id="finance-carousel" class="carousel"></div>
        <div class="carousel-controls">
          <button class="carousel-btn prev" data-target="finance-carousel">&#9664;</button>
          <button class="carousel-btn next" data-target="finance-carousel">&#9654;</button>
        </div>
      </div>
      <!-- Economy -->
      <div id="economy" class="hub-section">
        <h2>Economy</h2>
        <div id="economy-carousel" class="carousel"></div>
        <div class="carousel-controls">
          <button class="carousel-btn prev" data-target="economy-carousel">&#9664;</button>
          <button class="carousel-btn next" data-target="economy-carousel">&#9654;</button>
        </div>
      </div>
      <!-- Popular Podcasts -->
      <div id="popular-podcasts" class="category-section">
        <h2>Popular Podcasts</h2>
        <div class="card-grid">
          <div class="info-card"><h3>Pod Save America</h3><p>Political commentary from Pod Save America.</p></div>
          <div class="info-card"><h3>The Daily (NYT)</h3><p>News analysis and storytelling from The Daily.</p></div>
          <div class="info-card"><h3>NPR Politics</h3><p>Political coverage and analysis from NPR.</p></div>
        </div>
      </div>
      <!-- Social Trends Section -->
      <div id="social-trends" class="hub-section">
        <h2>Trending Now</h2>
        <div id="social-feed" class="grid"></div>
      </div>
    </section>

    <section id="podcasts-shows" class="tab-content" style="display: none;">
      <h2>Podcasts & Shows</h2>
      <input
        type="text"
        id="podcasts-search-bar"
        class="search-bar"
        placeholder="Search podcasts or shows..."
        style="
          width: 100%;
          max-width: 400px;
          padding: 10px 15px;
          margin: 10px 0 20px 0;
          border-radius: 8px;
          border: 1px solid #ccc;
          background-color: #2b2b2b;
          color: #fff;
          font-size: 1rem;
          transition: border-color 0.2s, box-shadow 0.2s;
        "
        onfocus="this.style.borderColor='#1e90ff'; this.style.boxShadow='0 0 5px #1e90ff';"
        onblur="this.style.borderColor='#ccc'; this.style.boxShadow='none';"
      />
      <div id="podcasts-cards" class="grid"></div>
    </section>
  </main>

  <!-- Basic tab switcher – prevents total breakage until full JS loads -->
  <script>
    function showTab(id) {
      console.log("showTab called for:", id);
      document.querySelectorAll('.tab-content').forEach(tab => {
        tab.style.display = 'none';
      });
      const target = document.getElementById(id);
      if (target) target.style.display = 'block';
    }

    // Hamburger menu open/close + tab switching
    document.addEventListener('DOMContentLoaded', () => {
      console.log("DOMContentLoaded – hamburger initializing");

      const hamburger = document.getElementById('hamburger');
      const menu = document.getElementById('hamburger-menu');

      if (hamburger && menu) {
        hamburger.addEventListener('click', () => {
          menu.classList.toggle('open');
          console.log("Menu toggled:", menu.classList.contains('open') ? 'open' : 'closed');
        });

        document.addEventListener('click', e => {
          if (menu.classList.contains('open') && !menu.contains(e.target) && !hamburger.contains(e.target)) {
            menu.classList.remove('open');
          }
        });

        // Menu links – switch tabs
        document.querySelectorAll('#hamburger-menu a').forEach(link => {
          link.addEventListener('click', e => {
            e.preventDefault();
            const id = link.getAttribute('href').substring(1);
            console.log("Menu link clicked:", id);
            showTab(id);
            menu.classList.remove('open');
          });
        });
      }

      // Show home hub by default
      showTab('startup-hub');
    });
  </script>

 <section id="my-officials" class="tab-content" style="display: none; position: relative;">
  <h2>My Officials</h2>
  <div style="text-align: center; margin: 30px 0; padding: 20px; background: #2b2b2b; border-radius: 12px; display:flex; align-items:center; flex-wrap:wrap; gap:20px; justify-content:center;">
    <label for="state-dropdown" style="font-size: 1.4rem; font-weight: bold; color: #fff;">
      Select your state to view officials:
    </label>
    <select id="state-dropdown"
            style="padding: 12px 16px; font-size: 1.1rem; border-radius: 8px; background: #1f1f1f; color: #fff; border: 1px solid #444; min-width: 320px;">
      <option value="Alabama">Alabama</option>
      <option value="Alaska">Alaska</option>
      <option value="American Samoa">American Samoa</option>
      <option value="Arizona">Arizona</option>
      <option value="Arkansas">Arkansas</option>
      <option value="California">California</option>
      <option value="Colorado">Colorado</option>
      <option value="Connecticut">Connecticut</option>
      <option value="Delaware">Delaware</option>
      <option value="District of Columbia">District of Columbia</option>
      <option value="Florida">Florida</option>
      <option value="Georgia">Georgia</option>
      <option value="Guam">Guam</option>
      <option value="Hawaii">Hawaii</option>
      <option value="Idaho">Idaho</option>
      <option value="Illinois">Illinois</option>
      <option value="Indiana">Indiana</option>
      <option value="Iowa">Iowa</option>
      <option value="Kansas">Kansas</option>
      <option value="Kentucky">Kentucky</option>
      <option value="Louisiana">Louisiana</option>
      <option value="Maine">Maine</option>
      <option value="Maryland">Maryland</option>
      <option value="Massachusetts">Massachusetts</option>
      <option value="Michigan">Michigan</option>
      <option value="Minnesota">Minnesota</option>
      <option value="Mississippi">Mississippi</option>
      <option value="Missouri">Missouri</option>
      <option value="Montana">Montana</option>
      <option value="Nebraska">Nebraska</option>
      <option value="Nevada">Nevada</option>
      <option value="New Hampshire">New Hampshire</option>
      <option value="New Jersey">New Jersey</option>
      <option value="New Mexico">New Mexico</option>
      <option value="New York">New York</option>
      <option value="North Carolina" selected>North Carolina</option>
      <option value="North Dakota">North Dakota</option>
      <option value="Northern Mariana Islands">Northern Mariana Islands</option>
      <option value="Ohio">Ohio</option>
      <option value="Oklahoma">Oklahoma</option>
      <option value="Oregon">Oregon</option>
      <option value="Pennsylvania">Pennsylvania</option>
      <option value="Puerto Rico">Puerto Rico</option>
      <option value="Rhode Island">Rhode Island</option>
      <option value="South Carolina">South Carolina</option>
      <option value="South Dakota">South Dakota</option>
      <option value="Tennessee">Tennessee</option>
      <option value="Texas">Texas</option>
      <option value="Utah">Utah</option>
      <option value="Vermont">Vermont</option>
      <option value="Virgin Islands">U.S. Virgin Islands</option>
      <option value="Virginia">Virginia</option>
      <option value="Washington">Washington</option>
      <option value="West Virginia">West Virginia</option>
      <option value="Wisconsin">Wisconsin</option>
      <option value="Wyoming">Wyoming</option>
    </select>
    <input type="text" id="search-bar"
           placeholder="Search officials..."
           style="padding: 12px 16px; font-size: 1.1rem; border-radius: 8px; background: #1f1f1f; color: #fff; border: 1px solid #444; min-width: 320px;" />
  </div>

  <div id="loading-overlay" style="
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      background: rgba(255,255,255,0.8);
      font-size: 1.5rem;
      font-weight: bold;
      z-index: 1000;
      transition: opacity 0.5s ease;
    ">
    Loading officials...
  </div>

  <div id="officials-container" class="grid"></div>
</section>

<!-- Ratings section starts here – full block kept intact -->
<section id="ratings" class="tab-content" style="display: none;">
  <h2>Ratings & Rankings</h2>
  <!-- Sub-tab toggle -->
  <div id="rr-toggle" class="rr-toggle" role="tablist" aria-label="Ratings & Rankings toggle">
    <button id="btn-ratings" class="rr-tab rr-tab-active" role="tab" aria-selected="true" aria-controls="ratings-section">
      Ratings
    </button>
    <button id="btn-rankings" class="rr-tab" role="tab" aria-selected="false" aria-controls="rankings-section">
      Rankings
    </button>
  </div>
  <!-- Ratings section -->
  <div id="ratings-section" class="rr-section rr-section-active" role="tabpanel" aria-labelledby="btn-ratings">
    <div id="ratings-filters" class="filters-bar">
      <input type="text" id="searchInput" class="filter-select" placeholder="Search officials..." aria-label="Search officials" />
      <select id="officeFilter" class="filter-select" aria-label="Office filter">
        <option value="">All Offices</option>
        <option value="president">President</option>
        <option value="vice president">Vice President</option>
        <option value="governor">Governor</option>
        <option value="lieutenant governor">Lt. Governor</option>
        <option value="senator">Senator</option>
        <option value="u.s. representative">U.S. Representative</option>
      </select>
      <select id="stateFilter" class="filter-select" aria-label="State filter"></select>
      <select id="partyFilter" class="filter-select" aria-label="Party filter">
        <option value="">All Parties</option>
        <option value="democrat">Democrat</option>
        <option value="republican">Republican</option>
        <option value="independent">Independent</option>
      </select>
    </div>
    <div id="ratings-cards" class="card-section"></div>
  </div>
  <!-- Rankings section -->
  <div id="rankings-section" class="rr-section" role="tabpanel" aria-labelledby="btn-rankings" aria-hidden="true">
    <div class="filters-row">
      <select id="rankingsOfficeFilter" class="filter-select" aria-label="Rankings office filter">
        <option value="senator" selected>Senators</option>
        <option value="u.s. representative">U.S. Representatives</option>
        <option value="governor">Governors</option>
        <option value="lieutenant governor">Lt. Governors</option>
        <option value="president">President</option>
        <option value="vice president">Vice President</option>
      </select>
      <select id="rankingsCategoryFilter" class="filter-select" aria-label="Rankings category filter">
        <option value="overall" selected>Overall Power Score</option>
        <option value="sponsoredBills">Bills Sponsored</option>
        <option value="sponsoredAmendments">Amendments Sponsored</option>
        <option value="cosponsoredBills">Bills Cosponsored</option>
        <option value="cosponsoredAmendments">Amendments Cosponsored</option>
        <option value="becameLawBills">Laws Enacted (Sponsored)</option>
        <option value="becameLawCosponsoredBills">Laws Enacted (Cosponsored)</option>
        <option value="committees">Committee Memberships</option>
        <option value="missedVotes">Missed Votes (lower is better)</option>
      </select>
    </div>
    <div class="leaderboard-wrap">
      <table id="rankings-leaderboard" class="leaderboard-table" aria-label="Rankings leaderboard">
        <thead>
          <tr>
            <th scope="col" data-sort="rank">Rank</th>
            <th scope="col" data-sort="name">Official</th>
            <th scope="col" data-sort="office">Office</th>
            <th scope="col" data-sort="score">Power Score</th>
            <th scope="col" data-sort="streak">Streak</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>
    <div class="rankings-info">
      <button id="scoringLogicBtn" class="info-button" type="button">
        Rankings Scoring and Weight Logic
      </button>
    </div>
  </div>

  <!-- Scorecard modal -->
  <div id="scorecardModal" class="scorecard-modal" aria-hidden="true">
    <div class="scorecard-modal-content" role="dialog" aria-modal="true" aria-labelledby="scorecardName">
      <button id="scorecardClose" class="scorecard-modal-close" aria-label="Close scorecard" type="button">&times;</button>
      <div id="scorecardHeader" class="scorecard-header"></div>
      <h2 id="scorecardName"></h2>
      <table id="scorecardBreakdown" class="scorecard-table"></table>
    </div>
  </div>

  <!-- Scoring Logic modal -->
  <div id="scoringLogicModal" class="scorecard-modal wide" aria-hidden="true">
    <div class="scorecard-modal-content" role="dialog" aria-modal="true" aria-labelledby="scoringLogicTitle">
      <button id="scoringLogicClose" class="scorecard-modal-close" aria-label="Close scoring logic" type="button">&times;</button>
      <h2 id="scoringLogicTitle">Rankings Scoring and Weight Logic</h2>
      <div id="scoringLogicBody" class="scoring-logic-body"></div>
    </div>
  </div>

  <!-- Ratings detail modal (for user ratings) -->
  <div id="ratings-modal" class="modal" style="display:none;">
    <div class="modal-content">
      <span class="close" onclick="closeModal('ratings-modal')">&times;</span>
      <img id="ratings-modal-photo" src="" alt="Official">
      <h2 id="ratings-modal-title"></h2>
      <p id="ratings-modal-position"></p>
      <div id="ratings-details"></div>
      <button id="rate-me-btn">Rate Me</button>
    </div>
  </div>

  <!-- Rate submission modal -->
  <div id="rate-modal" class="modal" style="display:none;">
    <div class="modal-content">
      <span class="close" onclick="closeModal('rate-modal')">&times;</span>
      <h2 id="rate-modal-title"></h2>
      <form id="rate-form"></form>
    </div>
  </div>
</section>

<!-- Inline script for My Officials + basic wiring -->
<script>
  // My Officials: State dropdown + search wiring
  document.addEventListener('DOMContentLoaded', () => {
    console.log("My Officials wiring running");

    const stateSelect = document.getElementById('state-dropdown');
    const searchBar = document.getElementById('search-bar');
    const loadingOverlay = document.getElementById('loading-overlay');

    if (stateSelect) {
      stateSelect.value = window.selectedState || 'North Carolina';
      stateSelect.addEventListener('change', (e) => {
        window.selectedState = e.target.value;
        console.log("State changed to:", window.selectedState);
        if (typeof renderOfficials === 'function') {
          renderOfficials(window.selectedState, searchBar?.value || '');
        } else {
          console.warn("renderOfficials not defined yet");
        }
      });
    }

    if (searchBar) {
      searchBar.addEventListener('input', (e) => {
        const query = e.target.value.trim();
        console.log("Officials search:", query);
        if (typeof renderOfficials === 'function') {
          renderOfficials(window.selectedState || 'North Carolina', query);
        }
      });
    }

    // Auto-hide loading overlay after 5s (fallback)
    if (loadingOverlay) {
      setTimeout(() => {
        loadingOverlay.style.opacity = '0';
        setTimeout(() => loadingOverlay.remove(), 500);
      }, 5000);
    }
  });
</script>
  
<section id="learning-resources" class="tab-content" style="display: none;">
  <h2>Learning Resources</h2>

  <!-- Quizzes subsection -->
  <h3>Quizzes</h3>
  <div id="quiz-launchers" class="card-grid">
    <div id="civic-knowledge-launcher" class="quiz-card">
      <img src="assets/isidewith-civic-knowledge.jpeg" alt="Civic Knowledge Quiz" class="card-image" loading="lazy" />
      <h3>Civic Knowledge</h3>
      <p>Test your knowledge of U.S. government, rights, and processes.</p>
      <a href="https://www.isidewith.com/knowledge-quiz/" target="_blank" rel="noopener noreferrer" class="btn">Take Quiz</a>
    </div>
    <div id="political-quiz-launcher" class="quiz-card">
      <img src="assets/isidewith.jpeg" alt="Political Quiz" class="card-image" loading="lazy" />
      <h3>Political Quiz</h3>
      <p>Answer nuanced questions to see where you align across issues.</p>
      <a href="https://www.isidewith.com/political-quiz" target="_blank" rel="noopener noreferrer" class="btn">Take Quiz</a>
    </div>
  </div>

  <!-- Games subsection -->
  <h3>Games</h3>
  <div class="card-grid">
    <div class="info-card">
      <img src="assets/thats-your-right.jpeg" alt="That's Your Right Logo" class="card-image" loading="lazy" />
      <h3>That’s Your Right</h3>
      <p><strong>Grades:</strong> 6–8, 9–12</p>
      <p><strong>Topic:</strong> Constitutional Rights</p>
      <p>Learn about constitutional rights through interactive play.</p>
      <p><strong>Play time:</strong> 0–15 min.</p>
      <a href="https://www.annenbergclassroom.org/resource/annenberg-classrooms-thats-right/" target="_blank" rel="noopener noreferrer" class="btn">Play Now</a>
    </div>
    <div class="info-card">
      <img src="assets/argument-wars.png" alt="Argument Wars" class="card-image" loading="lazy" />
      <h3>Argument Wars</h3>
      <p><strong>Grades:</strong> 6–8, 9–12</p>
      <p><strong>Topic:</strong> The Judicial Branch</p>
      <p>Argue real Supreme Court cases, and put your lawyering skills to the test.</p>
      <p><strong>Play time:</strong> 0–15 min.</p>
      <a href="https://www.icivics.org/games/argument-wars" target="_blank" rel="noopener noreferrer" class="btn">Play Now</a>
    </div>
    <div class="info-card">
      <img src="assets/branches-of-power.png" alt="Branches of Power" class="card-image" loading="lazy" />
      <h3>Branches of Power</h3>
      <p><strong>Grades:</strong> 6–8, 9–12</p>
      <p><strong>Topic:</strong> Separation of Powers</p>
      <p>You control all three branches of government. Can you balance powers and pass laws?</p>
      <p><strong>Play time:</strong> 15–30 min.</p>
      <a href="https://www.icivics.org/games/branches-power" target="_blank" rel="noopener noreferrer" class="btn">Play Now</a>
    </div>
    <div class="info-card">
      <img src="assets/brief-the-chief.png" alt="Brief the Chief" class="card-image" loading="lazy" />
      <h3>Brief the Chief</h3>
      <p><strong>Grades:</strong> 6–8, 9–12</p>
      <p><strong>Topic:</strong> The Executive Branch</p>
      <p>Step into the role of National Security Advisor and brief the President on critical issues.</p>
      <p><strong>Play time:</strong> 15–30 min.</p>
      <a href="https://www.icivics.org/games/brief-chief" target="_blank" rel="noopener noreferrer" class="btn">Play Now</a>
    </div>
    <div class="info-card">
      <img src="assets/cast-your-vote.png" alt="Cast Your Vote" class="card-image" loading="lazy" />
      <h3>Cast Your Vote</h3>
      <p><strong>Grades:</strong> 6–8, 9–12</p>
      <p><strong>Topic:</strong> Elections & Voting</p>
      <p>Election Day is coming! Learn how to evaluate candidates and issues before heading to the polls.</p>
      <p><strong>Play time:</strong> 30+ min.</p>
      <a href="https://www.icivics.org/games/cast-your-vote" target="_blank" rel="noopener noreferrer" class="btn">Play Now</a>
    </div>
    <div class="info-card">
      <img src="assets/convene-the-council.png" alt="Convene the Council" class="card-image" loading="lazy" />
      <h3>Convene the Council</h3>
      <p><strong>Grades:</strong> 6–8, 9–12</p>
      <p><strong>Topic:</strong> Foreign Policy</p>
      <p>Step inside the Situation Room and take on the role of president responding to international events.</p>
      <p><strong>Play time:</strong> 15–30 min.</p>
      <a href="https://ed.icivics.org/games/convene-council" target="_blank" rel="noopener noreferrer" class="btn">Play Now</a>
    </div>
    <div class="info-card">
      <img src="assets/counties-work.png" alt="Counties Work" class="card-image" loading="lazy" />
      <h3>Counties Work</h3>
      <p><strong>Grades:</strong> 6–8, 9–12</p>
      <p><strong>Topic:</strong> Local Government</p>
      <p>Run your own county government, manage departments, and try to get re-elected.</p>
      <p><strong>Play time:</strong> 15–30 min.</p>
      <a href="https://ed.icivics.org/games/counties-work" target="_blank" rel="noopener noreferrer" class="btn">Play Now</a>
    </div>
    <div class="info-card">
      <img src="assets/investigation-declaration.png" alt="Investigation Declaration" class="card-image" loading="lazy" />
      <h3>Investigation Declaration</h3>
      <p><strong>Grades:</strong> 6–8, 9–12</p>
      <p><strong>Topic:</strong> Foundations of Government</p>
      <p>Trace Enlightenment ideas that connect the Declaration of Independence to the Atlantic world.</p>
      <p><strong>Play time:</strong> 30+ min.</p>
      <a href="https://ed.icivics.org/games/investigation-declaration" target="_blank" rel="noopener noreferrer" class="btn">Play Now</a>
    </div>
    <div class="info-card">
      <img src="assets/neighborhood-good.png" alt="Neighborhood Good" class="card-image" loading="lazy" />
      <h3>Neighborhood Good</h3>
      <p><strong>Grades:</strong> K–5, 6–8, 9–12</p>
      <p><strong>Topic:</strong> Citizenship & Participation</p>
      <p>Meet with your neighbors, make a plan, and do some Neighborhood Good.</p>
      <p><strong>Play time:</strong> 15–30 min.</p>
      <a href="https://ed.icivics.org/games/neighborhood-good" target="_blank" rel="noopener noreferrer" class="btn">Play Now</a>
    </div>
    <div class="info-card">
      <img src="assets/newsfeed-defenders.png" alt="Newsfeed Defenders" class="card-image" loading="lazy" />
      <h3>Newsfeed Defenders</h3>
      <p><strong>Grades:</strong> 6–8, 9–12</p>
      <p><strong>Topic:</strong> Media & News Literacy</p>
      <p>Fight hidden ads, viral deception, and false reporting as a NewsFeed Defender.</p>
      <p><strong>Play time:</strong> 30+ min.</p>
      <a href="https://ed.icivics.org/node/2563177/resource" target="_blank" rel="noopener noreferrer" class="btn">Play Now</a>
    </div>
    <div class="info-card">
      <img src="assets/peoples-pie.png" alt="People's Pie" class="card-image" loading="lazy" />
      <h3>People's Pie</h3>
      <p><strong>Grades:</strong> 6–8, 9–12</p>
      <p><strong>Topic:</strong> Government & the Market</p>
      <p>Balance the federal budget by setting taxes and funding programs without angering citizens.</p>
      <p><strong>Play time:</strong> 15–30 min.</p>
      <a href="https://ed.icivics.org/games/peoples-pie" target="_blank" rel="noopener noreferrer" class="btn">Play Now</a>
    </div>
    <div class="info-card">
      <img src="assets/uncovering-loyalties.png" alt="Uncovering Loyalties" class="card-image" loading="lazy" />
      <h3>Uncovering Loyalties</h3>
      <p><strong>Grades:</strong> K–5, 6–8</p>
      <p><strong>Topic:</strong> Colonial America</p>
      <p>It’s 1774 in Williamsburg — uncover where loyalties lie as tensions rise in the colonies.</p>
      <p><strong>Play time:</strong> 0–15 min.</p>
      <a href="https://ed.icivics.org/games/uncovering-loyalties" target="_blank" rel="noopener noreferrer" class="btn">Play Now</a>
    </div>
    <div class="info-card">
      <img src="assets/win-the-white-house.png" alt="Win the White House" class="card-image" loading="lazy" />
      <h3>Win the White House</h3>
      <p><strong>Grades:</strong> 6–8, 9–12</p>
      <p><strong>Topic:</strong> Elections & Voting</p>
      <p>Run your own presidential campaign and battle for electoral votes across the nation.</p>
      <p><strong>Play time:</strong> 30+ min.</p>
      <a href="https://ed.icivics.org/games/win-white-house" target="_blank" rel="noopener noreferrer" class="btn">Play Now</a>
    </div>
    <div id="gerrymander-card" class="info-card">
      <img src="assets/gerrymanderdx.png" alt="Gerrymander-DX Logo" class="card-image" loading="lazy" />
      <h3>Gerrymander-DX</h3>
      <p>Test your strategy skills by manipulating districts in this satirical redistricting game.</p>
      <a href="https://busalonium.itch.io/gerrymander-dx" target="_blank" rel="noopener noreferrer" class="btn">Play Game</a>
    </div>
    <div id="powerplay-card" class="info-card">
      <img src="assets/powerplay.png" alt="The Power Play Chronicles Logo" class="card-image" loading="lazy" />
      <h3>The Power Play Chronicles</h3>
      <p>Step into the world of political maneuvering and power struggles in this narrative-driven game.</p>
      <a href="https://powerplaychron.itch.io/powerplaychronicles" target="_blank" rel="noopener noreferrer" class="btn">Play Game</a>
    </div>
  </div> <!-- end of Games card-grid -->

  <!-- Videos subsection -->
  <h3>Videos</h3>
  <div class="card-grid">
    <!-- A Constitution Comes to Life -->
    <div class="info-card">
      <img src="assets/constitution-comes-to-life.png" alt="A Constitution Comes to Life" class="card-image" loading="lazy" />
      <h3>A Constitution Comes to Life</h3>
      <p><strong>Grades:</strong> 6–8, 9–12</p>
      <p>Explore foundational constitutional principles, the 1787 convention, and the race to ratify.</p>
      <a href="https://ed.icivics.org/constitution-explained-constitution-comes-to-life" target="_blank" rel="noopener noreferrer" class="btn">Watch Playlist</a>
    </div>
    <!-- El surgimiento de la Constitución -->
    <div class="info-card">
      <img src="assets/el-surgimiento-de-la-constitucion.png" alt="El surgimiento de la Constitución" class="card-image" loading="lazy" />
      <h3>El surgimiento de la Constitución</h3>
      <p><strong>Grades:</strong> 6–8, 9–12</p>
      <p>Explora los principios constitucionales fundamentales y la Convención de 1787 en la que todo comenzó.</p>
      <a href="https://ed.icivics.org/todo-sobre-la-constitucion-el-surgimiento-de-la-constitucion" target="_blank" rel="noopener noreferrer" class="btn">Ver Playlist</a>
    </div>
    <!-- The Three Branches -->
    <div class="info-card">
      <img src="assets/three-branches.png" alt="The Three Branches" class="card-image" loading="lazy" />
      <h3>The Three Branches</h3>
      <p><strong>Grades:</strong> 6–8, 9–12</p>
      <p>Learn how power is divided among legislative, executive, and judicial branches in 6 videos.</p>
      <a href="https://ed.icivics.org/constitution-explained-three-branches" target="_blank" rel="noopener noreferrer" class="btn">Watch Playlist</a>
    </div>
    <!-- Los tres poderes -->
    <div class="info-card">
      <img src="assets/los-tres-poderes.png" alt="Los tres poderes" class="card-image" loading="lazy" />
      <h3>Los tres poderes</h3>
      <p><strong>Grades:</strong> 6–8, 9–12</p>
      <p>Descubre cómo se divide el poder del Gobierno de EE. UU. en Legislativo, Ejecutivo y Judicial.</p>
      <a href="https://ed.icivics.org/todo-sobre-la-constitucion-los-tres-poderes" target="_blank" rel="noopener noreferrer" class="btn">Ver Playlist</a>
    </div>
    <!-- Articles of the Constitution -->
    <div class="info-card">
      <img src="assets/articles-of-the-constitution.png" alt="Articles of the Constitution" class="card-image" loading="lazy" />
      <h3>Articles of the Constitution</h3>
      <p><strong>Grades:</strong> 6–8, 9–12</p>
      <p>Breaks down the Constitution Article by Article to help students understand its contents.</p>
      <a href="https://ed.icivics.org/constitution-explained-articles-of-the-constitution" target="_blank" rel="noopener noreferrer" class="btn">Watch Playlist</a>
    </div>
    <!-- Los artículos de la Constitución -->
    <div class="info-card">
      <img src="assets/los-articulos-de-la-constitucion.png" alt="Los artículos de la Constitución" class="card-image" loading="lazy" />
      <h3>Los artículos de la Constitución</h3>
      <p><strong>Grades:</strong> 6–8, 9–12</p>
      <p>Analiza la Constitución artículo por artículo para ayudar a los estudiantes a comprenderla.</p>
      <a href="https://ed.icivics.org/todo-sobre-la-constitucion-los-articulos-de-la-constitucion" target="_blank" rel="noopener noreferrer" class="btn">Ver Playlist</a>
    </div>
    <!-- Bill of Rights -->
    <div class="info-card">
      <img src="assets/bill-of-rights.png" alt="Bill of Rights" class="card-image" loading="lazy" />
      <h3>Bill of Rights</h3>
      <p><strong>Grades:</strong> 6–8, 9–12</p>
      <p>Explore the key freedoms and protections outlined in the first ten amendments.</p>
      <a href="https://ed.icivics.org/constitution-explained-bill-of-rights" target="_blank" rel="noopener noreferrer" class="btn">Watch Playlist</a>
    </div>
    <!-- La Declaración de Derechos -->
    <div class="info-card">
      <img src="assets/la-declaracion-de-derechos.png" alt="La Declaración de Derechos" class="card-image" loading="lazy" />
      <h3>La Declaración de Derechos</h3>
      <p><strong>Grades:</strong> 6–8, 9–12</p>
      <p>Explora las libertades y protecciones de las primeras diez enmiendas.</p>
      <a href="https://ed.icivics.org/todo-sobre-la-constitucion-la-declaracion-de-derechos" target="_blank" rel="noopener noreferrer" class="btn">Ver Playlist</a>
    </div>
    <!-- Freedoms of the First Amendment -->
    <div class="info-card">
      <img src="assets/freedoms-of-the-first-amendment.png" alt="Freedoms of the First Amendment" class="card-image" loading="lazy" />
      <h3>Freedoms of the First Amendment</h3>
      <p><strong>Grades:</strong> 6–8, 9–12</p>
      <p>Dig deep into the First Amendment and its multiple freedoms.</p>
      <a href="https://ed.icivics.org/constitution-explained-freedoms-first-amendment" target="_blank" rel="noopener noreferrer" class="btn">Watch Playlist</a>
    </div>
    <!-- Las libertades de la Primera Enmienda -->
    <div class="info-card">
      <img src="assets/las-libertades-de-la-primera-enmienda.png" alt="Las libertades de la Primera Enmienda" class="card-image" loading="lazy" />
      <h3>Las libertades de la Primera Enmienda</h3>
      <p><strong>Grades:</strong> 6–8, 9–12</p>
      <p>Explora las libertades incluidas en la Primera Enmienda.</p>
      <a href="https://ed.icivics.org/todo-sobre-la-constitucion-las-libertades-de-la-primera-enmienda" target="_blank" rel="noopener noreferrer" class="btn">Ver Playlist</a>
    </div>
    <!-- Expanding Rights -->
    <div class="info-card">
      <img src="assets/expanding-rights.png" alt="Expanding Rights" class="card-image" loading="lazy" />
      <h3>Expanding Rights</h3>
      <p><strong>Grades:</strong> 6–8, 9–12</p>
      <p>Learn how amendments expanded rights for excluded groups throughout history.</p>
      <a href="https://ed.icivics.org/constitution-explained-expanding-rights" target="_blank" rel="noopener noreferrer" class="btn">Watch Playlist</a>
    </div>
    <!-- Derechos en expansión -->
    <div class="info-card">
      <img src="assets/derechos-en-expansion.png" alt="Derechos en expansión" class="card-image" loading="lazy" />
      <h3>Derechos en expansión</h3>
      <p><strong>Grades:</strong> 6–8, 9–12</p>
      <p>Explora cómo las enmiendas expandieron derechos a grupos previamente excluidos.</p>
      <a href="https://ed.icivics.org/todo-sobre-la-constitucion-derechos-en-expansion" target="_blank" rel="noopener noreferrer" class="btn">Ver Playlist</a>
    </div>
    <!-- Reconstruction Era Amendments -->
    <div class="info-card">
      <img src="assets/reconstruction-era-amendments.png" alt="Reconstruction Era Amendments" class="card-image" loading="lazy" />
      <h3>Reconstruction Era Amendments</h3>
      <p><strong>Grades:</strong> 6–8, 9–12</p>
      <p>Discover how the Constitution changed following the Civil War.</p>
      <a href="https://ed.icivics.org/constitution-explained-reconstruction-era-amendments" target="_blank" rel="noopener noreferrer" class="btn">Watch Playlist</a>
    </div>
    <!-- Enmiendas de la Reconstrucción -->
    <div class="info-card">
      <img src="assets/enmiendas-de-la-reconstruccion.png" alt="Enmiendas de la Reconstrucción" class="card-image" loading="lazy" />
      <h3>Enmiendas de la Reconstrucción</h3>
      <p><strong>Grades:</strong> 6–8, 9–12</p>
      <p>Explica cómo la Constitución cambió tras la Guerra Civil e introduce las enmiendas de la era de Reconstrucción.</p>
      <a href="https://ed.icivics.org/todo-sobre-la-constitucion-enmiendas-de-la-reconstruccion" target="_blank" rel="noopener noreferrer" class="btn">Ver Playlist</a>
    </div>
    <!-- Your Voice, Your Vote -->
    <div class="info-card">
      <img src="assets/your-voice-your-vote.png" alt="Your Voice, Your Vote" class="card-image" loading="lazy" />
      <h3>Your Voice, Your Vote</h3>
      <p><strong>Grades:</strong> 6–8, 9–12</p>
      <p>Explore amendments that expanded voting rights for men, women, young people, and D.C. residents.</p>
      <a href="https://ed.icivics.org/constitution-explained-your-voice-your-vote" target="_blank" rel="noopener noreferrer" class="btn">Watch Playlist</a>
    </div>
    <!-- Tu voz, tu voto -->
    <div class="info-card">
      <img src="assets/tu-voz-tu-voto.png" alt="Tu voz, tu voto" class="card-image" loading="lazy" />
      <h3>Tu voz, tu voto</h3>
      <p><strong>Grades:</strong> 6–8, 9–12</p>
      <p>Explora las enmiendas que expandieron el derecho al voto para distintos grupos.</p>
      <a href="https://ed.icivics.org/todo-sobre-la-constitucion-tu-voz-tu-voto" target="_blank" rel="noopener noreferrer" class="btn">Ver Playlist</a>
    </div>
    <!-- Progressive Era Amendments -->
    <div class="info-card">
      <img src="assets/progressive-era-amendments.png" alt="Progressive Era Amendments" class="card-image" loading="lazy" />
      <h3>Progressive Era Amendments</h3>
      <p><strong>Grades:</strong> 6–8, 9–12</p>
      <p>Discover constitutional changes from the Progressive Era that reshaped American life.</p>
      <a href="https://ed.icivics.org/constitution-explained-progressive-era-amendments" target="_blank" rel="noopener noreferrer" class="btn">Watch Playlist</a>
    </div>
    <!-- Enmiendas de la era progresista -->
    <div class="info-card">
      <img src="assets/enmiendas-de-la-era-progresista.png" alt="Enmiendas de la era progresista" class="card-image" loading="lazy" />
      <h3>Enmiendas de la era progresista</h3>
      <p><strong>Grades:</strong> 6–8, 9–12</p>
      <p>Explora los cambios constitucionales de la era progresista que transformaron la vida en EE. UU.</p>
      <a href="https://ed.icivics.org/todo-sobre-la-constitucion-enmiendas-de-la-era-progresista" target="_blank" rel="noopener noreferrer" class="btn">Ver Playlist</a>
    </div>
    <!-- Other Amendments -->
    <div class="info-card">
      <img src="assets/other-amendments.png" alt="Other Amendments" class="card-image" loading="lazy" />
      <h3>Other Amendments</h3>
      <p><strong>Grades:</strong> 6–8, 9–12</p>
      <p>Explore diverse amendments covering income tax, presidential terms, and more.</p>
      <a href="https://ed.icivics.org/constitution-explained-other-amendments" target="_blank" rel="noopener noreferrer" class="btn">Watch Playlist</a>
    </div>
    <!-- Otras enmiendas -->
    <div class="info-card">
      <img src="assets/otras-enmiendas.png" alt="Otras enmiendas" class="card-image" loading="lazy" />
      <h3>Otras enmiendas</h3>
      <p><strong>Grades:</strong> 6–8, 9–12</p>
      <p>Explora una selección diversa de enmiendas constitucionales.</p>
      <a href="https://ed.icivics.org/todo-sobre-la-constitucion-otras-enmiendas" target="_blank" rel="noopener noreferrer" class="btn">Ver Playlist</a>
    </div>
    <!-- The Constitution EXPLAINED: Video Series -->
    <div class="info-card">
      <img src="assets/constitution-explained-series.png" alt="The Constitution EXPLAINED: Video Series" class="card-image" loading="lazy" />
      <h3>The Constitution EXPLAINED: Video Series</h3>
      <p><strong>Grades:</strong> 6–8, 9–12</p>
      <p>A comprehensive series of 35 short videos explaining the text, history, and relevance of the Constitution.</p>
      <a href="https://ed.icivics.org/constitution-explained-video-series" target="_blank" rel="noopener noreferrer" class="btn">Watch Playlist</a>
    </div>
    <!-- Todo sobre la Constitución: serie de videos -->
    <div class="info-card">
      <img src="assets/todo-sobre-la-constitucion-series.png" alt="Todo sobre la Constitución: serie de videos" class="card-image" loading="lazy" />
      <h3>Todo sobre la Constitución: serie de videos</h3>
      <p><strong>Grades:</strong> 6–8, 9–12</p>
      <p>Una serie completa de 35 videos cortos que explican el texto, la historia y la relevancia de la Constitución.</p>
      <a href="https://ed.icivics.org/todo-sobre-la-constitucion-serie-de-videos" target="_blank" rel="noopener noreferrer" class="btn">Ver Playlist</a>
    </div>
    <!-- Civic Digital Literacy -->
    <div class="info-card">
      <img src="assets/civic-digital-literacy.png" alt="Civic Digital Literacy" class="card-image" loading="lazy" />
      <h3>Civic Digital Literacy</h3>
      <p><strong>Grades:</strong> 6–8, 9–12</p>
      <p>Unlock the power of digital literacy with short videos that spark deeper learning and conversation.</p>
      <a href="https://ed.icivics.org/node/3354518" target="_blank" rel="noopener noreferrer" class="btn">Watch Playlist</a>
    </div>
    <!-- Changemakers: Women in History -->
    <div class="info-card">
      <img src="assets/changemakers-women-in-history.png" alt="Changemakers: Women in History" class="card-image" loading="lazy" />
      <h3>Changemakers: Women in History</h3>
      <p><strong>Grades:</strong> 6–8, 9–12</p>
      <p>Meet extraordinary women who broke barriers and helped change the nation.</p>
      <a href="https://ed.icivics.org/node/3358612" target="_blank" rel="noopener noreferrer" class="btn">Watch Playlist</a>
    </div>
    <!-- Changemakers: Key Players in the Civil Rights Movement -->
    <div class="info-card">
      <img src="assets/changemakers-civil-rights.png" alt="Changemakers: Key Players in the Civil Rights Movement" class="card-image" loading="lazy" />
      <h3>Changemakers: Key Players in the Civil Rights Movement</h3>
      <p><strong>Grades:</strong> 6–8, 9–12</p>
      <p>Discover the civil rights activists whose actions changed the nation.</p>
      <a href="https://ed.icivics.org/node/3358653" target="_blank" rel="noopener noreferrer" class="btn">Watch Playlist</a>
    </div>
    <!-- Changemakers Video Series -->
    <div class="info-card">
      <img src="assets/changemakers-series.png" alt="Changemakers Video Series" class="card-image" loading="lazy" />
      <h3>Changemakers Video Series</h3>
      <p><strong>Grades:</strong> 6–8, 9–12</p>
      <p>Meet ordinary people who made extraordinary contributions to our nation.</p>
      <a href="https://ed.icivics.org/node/3358660" target="_blank" rel="noopener noreferrer" class="btn">Watch Playlist</a>
    </div>
  </div> <!-- end of Videos card-grid -->
</section>
  
<!-- Civic Intelligence Tab -->
<section id="civic" class="tab-content" style="display: none;">
  <h2>Civic Intelligence Dashboard</h2>
  <div id="calendar"></div>
</section>

<!-- Polls & Elections Tab -->
<section id="polls" class="tab-content" style="display: none;">
  <h2>Polls & Elections</h2>
  <!-- Polls Subsection -->
  <div id="polls-cards" class="card-section">
    <!-- Poll cards will populate here via JS -->
  </div>
  <!-- Elections Subsection -->
  <div id="elections-cards" class="card-section">
    <!-- Election cards will populate here via JS -->
  </div>
</section>

<!-- Political Organizations Tab -->
<section id="organizations" class="tab-content" style="display: none;">
  <h2>Political Groups — Help Make a Difference!</h2>
  <!-- Featured Cards -->
  <div id="featured-political-cards" class="card-section">
    <div class="info-card">
      <img src="assets/political-parties.png" alt="Political Parties" class="card-image" loading="lazy" />
      <h3>Political Parties</h3>
      <p>Explore the major parties shaping U.S. politics.</p>
      <a href="https://www.isidewith.com/parties" target="_blank" rel="noopener noreferrer" class="btn">View Parties</a>
    </div>
    <div class="info-card">
      <img src="assets/political-ideology.jpeg" alt="Political Ideologies" class="card-image" loading="lazy" />
      <h3>Political Ideologies</h3>
      <p>Learn about the diverse ideologies influencing policy and debate.</p>
      <a href="https://www.isidewith.com/ideologies" target="_blank" rel="noopener noreferrer" class="btn">View Ideologies</a>
    </div>
  </div>
  <!-- Existing grid -->
  <div class="organization-grid">
    <!-- Your existing group cards (populate via JS if needed) -->
  </div>
</section>

<!-- Community Tab -->
<section id="community" class="tab-content" style="display: none;">
  <h2>Community — Stay Informed & Engaged</h2>
  <div id="community-cards" class="card-section">
    <!-- News -->
    <div id="news-card" class="info-card">
      <img src="assets/isidewith-news.jpeg" alt="iSideWith News" class="card-image" loading="lazy" />
      <h3>News</h3>
      <p>Trending discussions and news curated by popularity and recency.</p>
      <a href="https://www.isidewith.com/discuss/tags/5ncx/?nasort=popular-today" target="_blank" rel="noopener noreferrer" class="btn">View News</a>
    </div>
    <!-- Videos -->
    <div id="videos-card" class="info-card">
      <img src="assets/isidewith-videos.jpeg" alt="iSideWith Videos" class="card-image" loading="lazy" />
      <h3>Videos</h3>
      <p>Watch political clips, debates, and interviews from the community.</p>
      <a href="https://www.isidewith.com/discuss/tags/5ncm/" target="_blank" rel="noopener noreferrer" class="btn">View Videos</a>
    </div>
    <!-- Issues -->
    <div id="issues-card" class="info-card">
      <img src="assets/isidewith-issues.jpeg" alt="iSideWith Issues" class="card-image" loading="lazy" />
      <h3>Issues</h3>
      <p>Explore positions and polling across major political issues.</p>
      <a href="https://www.isidewith.com/polls" target="_blank" rel="noopener noreferrer" class="btn">Explore Issues</a>
    </div>
    <!-- Discuss -->
    <div id="discuss-card" class="info-card">
      <img src="assets/isidewith-discuss.jpeg" alt="iSideWith Discuss" class="card-image" loading="lazy" />
      <h3>Discuss</h3>
      <p>Join debates and share perspectives on current political topics.</p>
      <a href="https://www.isidewith.com/discuss/" target="_blank" rel="noopener noreferrer" class="btn">Join Discussion</a>
    </div>
  </div>
</section>

<!-- Voting Tab -->
<section id="voting" class="tab-content" style="display: none;">
  <h2>Voting & Registration</h2>
  <div id="voting-cards"></div>
</section>

<!-- Citizenship/Immigration Tab -->
<section id="citizenship" class="tab-content" style="display: none;">
  <h2>Citizenship & Immigration — Doing it the Right and Legal Way</h2>
  <!-- Naturalization -->
  <div id="citizenship-cards"></div>
  <!-- Immigration Pathways -->
  <div id="immigration-cards"></div>
  <!-- Asylum & Refugees -->
  <div id="asylum-cards"></div>
  <!-- Study Materials -->
  <div id="study-cards"></div>
  <!-- Legal Resources -->
  <div id="legal-cards"></div>
  <!-- News & Policy Updates -->
  <div id="news-cards"></div>
  <!-- Rights & Responsibilities -->
  <div id="rights-cards"></div>
</section>

</main>

<!-- Officials Modal -->
<div id="officials-modal" class="modal">
  <div class="modal-content" id="officials-content"></div>
  <button id="close-modal" class="close-button">&times;</button>
</div>

<!-- Ratings Modal -->
<div id="ratings-modal" class="modal" style="display:none;">
  <div class="modal-content">
    <span class="close" onclick="closeModal('ratings-modal')">&times;</span>
    <h2 id="ratings-modal-title"></h2>
    <img id="ratings-modal-photo" src="" alt="Official">
    <p id="ratings-modal-position"></p>
    <div id="ratings-details"></div>
    <button id="rate-me-btn">Rate Me</button>
  </div>
</div>

<!-- Rate Modal -->
<div id="rate-modal" class="modal" style="display:none;">
  <div class="modal-content">
    <span class="close" onclick="closeModal('rate-modal')">&times;</span>
    <h2 id="rate-modal-title"></h2>
    <form id="rate-form"></form>
  </div>
</div>

<!-- Poll Modal -->
<div id="pollModal" class="modal">
  <div class="modal-content" id="pollModalContent"></div>
</div>

<!-- Shared Civics Quiz Modal -->
<div id="civicsQuizModal" class="modal" style="display:none;">
  <div class="modal-content">
    <span class="close" onclick="closeModalWindow('civicsQuizModal')">&times;</span>
    <div id="civics-quiz">
      <h2 id="quiz-title">Daily Civics Quiz</h2>
      <p id="quiz-desc">Test your United States government, economics, and history knowledge.</p>
      <!-- Progress bar -->
      <div id="quiz-progress-bar">
        <div id="quiz-progress-fill"></div>
      </div>
      <!-- Progress text -->
      <div id="quiz-progress"></div>
      <!-- Question -->
      <div id="quiz-question"></div>
      <!-- Options -->
      <div id="quiz-options"></div>
      <!-- Controls -->
      <div id="quiz-controls" class="quiz-controls">
        <button id="quiz-submit" class="quiz-btn">Submit</button>
        <button id="quiz-next" class="quiz-btn" style="display:none;">Next</button>
      </div>
      <!-- Feedback + Result -->
      <div id="quiz-feedback"></div>
      <div id="quiz-score"></div>
    </div>
  </div>
</div>

<!-- Political Typology Quiz Modal -->
<div id="typologyQuizModal" class="modal" style="display:none;">
  <div class="modal-content">
    <span class="close" onclick="closeModalWindow('typologyQuizModal')">&times;</span>
    <div id="typology-quiz">
      <h2>Political Typology Quiz</h2>
      <p>Discover where you sit on the political spectrum.</p>
      <!-- Progress bar -->
      <div id="typology-progress-bar">
        <div id="typology-progress-fill"></div>
      </div>
      <!-- Progress text -->
      <div id="typology-progress"></div>
      <!-- Question -->
      <div id="typology-question"></div>
      <!-- Options -->
      <div id="typology-options"></div>
      <!-- Controls -->
      <div id="typology-controls" class="quiz-controls">
        <button id="typology-submit" class="quiz-btn">Submit</button>
      </div>
      <!-- Feedback + Result -->
      <div id="typology-feedback"></div>
      <div id="typology-result"></div>
    </div>
  </div>
</div>

<!-- Cabinet Modal -->
<div id="cabinetModal" class="modal">
  <div class="modal-content">
    <span class="close" onclick="closeModalWindow('cabinetModal')">&times;</span>
    <div id="cabinetGridView">
      <div id="cabinetList" class="officials-grid"></div>
    </div>
    <div id="cabinetDetailView" style="display:none;">
      <button onclick="backToCabinetGrid()">Back</button>
      <div id="cabinetMemberDetail"></div>
    </div>
  </div>
</div>

<!-- Inline script – improved tab switching & defaults -->
<script>
  // Improved showTab – adds ARIA and callback support
  function showTab(tabId, callback = null) {
    console.log("showTab called for:", tabId);
    document.querySelectorAll('.tab-content').forEach(tab => {
      tab.style.display = 'none';
      tab.setAttribute('aria-hidden', 'true');
    });
    const targetTab = document.getElementById(tabId);
    if (targetTab) {
      targetTab.style.display = 'block';
      targetTab.setAttribute('aria-hidden', 'false');
      targetTab.focus(); // Accessibility: focus on new tab
    }
    if (typeof callback === 'function') callback();
  }

  // Tab-specific loaders (safe calls)
  function loadTab(tabId) {
    if (tabId === 'polls') showPolls?.();
    if (tabId === 'voting') showVoting?.();
    if (tabId === 'citizenship') showCitizenship?.();
    if (tabId === 'organizations') showOrganizations?.();
    if (tabId === 'community') showCommunity?.();
    if (tabId === 'civic') showCivic?.();
  }

  // Hamburger menu + tab switching (global)
  document.addEventListener('DOMContentLoaded', () => {
    console.log("DOMContentLoaded – final wiring running");

    const hamburger = document.getElementById('hamburger');
    const menu = document.getElementById('hamburger-menu');

    if (hamburger && menu) {
      hamburger.addEventListener('click', () => {
        menu.classList.toggle('open');
        console.log("Menu toggled:", menu.classList.contains('open') ? 'open' : 'closed');
      });

      document.addEventListener('click', e => {
        if (menu.classList.contains('open') && !menu.contains(e.target) && !hamburger.contains(e.target)) {
          menu.classList.remove('open');
        }
      });

      document.querySelectorAll('#hamburger-menu a').forEach(link => {
        link.addEventListener('click', e => {
          e.preventDefault();
          const id = link.getAttribute('href').substring(1);
          console.log("Menu link clicked:", id);
          showTab(id, () => loadTab(id));
          menu.classList.remove('open');
        });
      });
    }

    // Default to Home Hub
    showTab('startup-hub', () => console.log("Home Hub loaded"));
  });
</script>
  
   <!-- Carousel Feed Logic (image-enforced, 25 items, rotating track + arrows) -->
<script>
  const feeds = {
    world: [
      "https://feeds.reuters.com/reuters/worldNews",
      "https://www.aljazeera.com/xml/rss/all.xml",
      "https://www.theguardian.com/world/rss"
    ],
    finance: [
      "https://www.investing.com/rss/news.rss",
      "https://www.cnbc.com/id/10001147/device/rss/rss.xml",
      "https://feeds.finance.yahoo.com/rss/2.0/headline?s=^DJI"
    ],
    economy: [
      "https://www.investing.com/rss/news_25.rss",
      "https://www.cnbc.com/id/20910258/device/rss/rss.xml",
      "https://www.theguardian.com/business/economics/rss"
    ]
  };

  async function loadFeed(url) {
    try {
      const response = await fetch(
        `https://api.rss2json.com/v1/api.json?rss_url=${encodeURIComponent(url)}`
      );
      if (!response.ok) throw new Error(`RSS fetch failed: ${response.status}`);
      const data = await response.json();
      return data.items || [];
    } catch (err) {
      console.error("Feed load error:", err);
      return [];
    }
  }

  function extractImage(item) {
    if (item.thumbnail) return item.thumbnail;
    if (item.enclosure && item.enclosure.link) return item.enclosure.link;
    const match = item.content?.match(/<img[^>]+src="([^">]+)"/i);
    if (match && match[1]) return match[1];
    return "assets/default-thumb.png"; // fallback
  }

  async function loadSection(section, containerId) {
    const container = document.getElementById(containerId);
    if (!container) return console.warn(`Container #${containerId} not found`);

    container.innerHTML = '<p>Loading...</p>';
    const track = document.createElement("div");
    track.className = "carousel-track";
    container.innerHTML = '';
    container.appendChild(track);

    const perSourceItems = [];
    for (const url of feeds[section] || []) {
      const items = await loadFeed(url);
      const mapped = items.map(item => ({
        item,
        img: extractImage(item),
        source: url
      })).filter(x => x.img);
      perSourceItems.push(mapped);
    }

    // Round-robin to mix sources
    const maxCards = 25;
    const result = [];
    let added = 0;
    let index = 0;
    while (added < maxCards) {
      let progressed = false;
      for (let s = 0; s < perSourceItems.length; s++) {
        const sourceList = perSourceItems[s];
        if (index < sourceList.length) {
          result.push(sourceList[index]);
          added++;
          progressed = true;
          if (added >= maxCards) break;
        }
      }
      if (!progressed) break;
      index++;
    }

    if (result.length === 0) {
      container.innerHTML = '<p>No stories with images available.</p>';
      return;
    }

    result.forEach(({ item, img }) => {
      const card = document.createElement("a");
      card.className = "hub-card carousel-card";
      card.href = item.link;
      card.target = "_blank";
      card.rel = "noopener noreferrer";
      card.innerHTML = `
        <img src="${img}" alt="${item.title || 'News'}" class="carousel-img" loading="lazy" onerror="this.src='assets/default-thumb.png'">
        <h3>${item.title || 'Untitled'}</h3>
        <p>${new Date(item.pubDate).toLocaleDateString()}</p>
      `;
      track.appendChild(card);
    });
  }

  function setupControls(containerId) {
    const track = document.querySelector(`#${containerId} .carousel-track`);
    if (!track) return;
    const prevBtn = document.querySelector(`.carousel-controls .prev[data-target="${containerId}"]`);
    const nextBtn = document.querySelector(`.carousel-controls .next[data-target="${containerId}"]`);
    if (!prevBtn || !nextBtn) return;

    let position = 0;
    const step = 310; // card width + gap

    // Auto-scroll
    setInterval(() => {
      position = (position + 1) % track.children.length;
      track.style.transform = `translateX(-${position * step}px)`;
    }, 5000);

    prevBtn.addEventListener("click", () => {
      position = Math.max(0, position - 1);
      track.style.transform = `translateX(-${position * step}px)`;
    });

    nextBtn.addEventListener("click", () => {
      position = Math.min(track.children.length - 1, position + 1);
      track.style.transform = `translateX(-${position * step}px)`;
    });
  }

  // Load all carousels
  (async () => {
    await Promise.all([
      loadSection("world", "world-news-carousel"),
      loadSection("finance", "finance-carousel"),
      loadSection("economy", "economy-carousel")
    ]);
    setupControls("world-news-carousel");
    setupControls("finance-carousel");
    setupControls("economy-carousel");
  })();
</script>

<!-- Social links loading -->
<script>
  async function loadSocialLinks() {
    try {
      const res = await fetch('/social-links.json');
      if (!res.ok) throw new Error('Social links fetch failed');
      return await res.json();
    } catch (err) {
      console.error("Social links error:", err);
      return {};
    }
  }

  async function renderAllSocialLinks() {
    const data = await loadSocialLinks();
    Object.keys(data).forEach(slug => {
      const links = data[slug];
      const container = document.getElementById(`social-${slug}`);
      if (!container || !links) return;
      container.innerHTML = '';
      if (links.facebook) container.innerHTML += `<a href="${links.facebook}" target="_blank" rel="noopener noreferrer"><img src="/assets/facebook.svg" alt="Facebook"></a>`;
      if (links.instagram) container.innerHTML += `<a href="${links.instagram}" target="_blank" rel="noopener noreferrer"><img src="/assets/instagram.svg" alt="Instagram"></a>`;
      if (links.x) container.innerHTML += `<a href="${links.x}" target="_blank" rel="noopener noreferrer"><img src="/assets/x.svg" alt="X"></a>`;
      if (links.youtube) container.innerHTML += `<a href="${links.youtube}" target="_blank" rel="noopener noreferrer"><img src="/assets/youtube.svg" alt="YouTube"></a>`;
      if (links.tiktok) container.innerHTML += `<a href="${links.tiktok}" target="_blank" rel="noopener noreferrer"><img src="/assets/tiktok.svg" alt="TikTok"></a>`;
    });
  }
</script>

<!-- Unified inline script – ALL wiring here -->
<script>
  document.addEventListener('DOMContentLoaded', () => {
    console.log("Final inline wiring running");

    // Hamburger menu
    const hamburger = document.getElementById('hamburger');
    const menu = document.getElementById('hamburger-menu');
    if (hamburger && menu) {
      hamburger.addEventListener('click', () => {
        menu.classList.toggle('open');
        console.log("Menu toggled");
      });
      document.addEventListener('click', e => {
        if (menu.classList.contains('open') && !menu.contains(e.target) && !hamburger.contains(e.target)) {
          menu.classList.remove('open');
        }
      });
      document.querySelectorAll('#hamburger-menu a').forEach(link => {
        link.addEventListener('click', e => {
          e.preventDefault();
          const id = link.getAttribute('href').substring(1);
          console.log("Menu link:", id);
          showTab(id);
          menu.classList.remove('open');
        });
      });
    }

    // State dropdown
    const stateSelect = document.getElementById('state-dropdown');
    if (stateSelect) {
      stateSelect.addEventListener('change', e => {
        window.selectedState = e.target.value;
        console.log("State:", window.selectedState);
        renderOfficials?.(window.selectedState, document.getElementById('search-bar')?.value || '');
      });
    }

    // Search bar
    const searchBar = document.getElementById('search-bar');
    if (searchBar) {
      searchBar.addEventListener('input', e => {
        renderOfficials?.(window.selectedState || 'North Carolina', e.target.value.trim());
      });
    }

    // RSS network cards
    const feedTitle = document.getElementById('feed-title');
    const feedStories = document.getElementById('feed-stories');
    const rssFeeds = {
      msnbc: 'https://feeds.nbcnews.com/nbcnews/public/news',
      abc: 'https://abcnews.go.com/abcnews/topstories',
      cbs: 'https://www.cbsnews.com/latest/rss/main',
      fox: 'https://feeds.foxnews.com/foxnews/latest',
      newsnation: "https://www.newsnationnow.com/feed/"
    };
    async function loadFeed(network) {
      if (!feedTitle || !feedStories) return;
      feedTitle.textContent = `${network.toUpperCase()} Stories`;
      feedStories.innerHTML = '<p>Loading...</p>';
      try {
        const response = await fetch(`https://api.rss2json.com/v1/api.json?rss_url=${encodeURIComponent(rssFeeds[network])}`);
        if (!response.ok) throw new Error(`RSS ${response.status}`);
        const data = await response.json();
        const items = data.items || [];
        feedStories.innerHTML = '';
        items.slice(0, 10).forEach(item => {
          const story = document.createElement('div');
          story.className = 'story-card';
          story.innerHTML = `<a href="${item.link}" target="_blank" rel="noopener noreferrer">${item.title}</a>`;
          feedStories.appendChild(story);
        });
      } catch (err) {
        console.error("RSS error:", err);
        feedStories.innerHTML = '<p>Error loading feed.</p>';
      }
    }
    document.querySelectorAll('.network-card[data-network]').forEach(card => {
      card.addEventListener('click', () => loadFeed(card.dataset.network));
    });

    // Render social links
    renderAllSocialLinks?.();

    // Default tab
    showTab?.('startup-hub');
  });
</script>
