      - name: Generate senators-rankings.json (Roster Only)
        run: |
          node -e "
          const fs = require('fs');
          const path = require('path');

          const rosterPath = path.join(process.cwd(), 'public', 'legislators-current.json');
          const legislators = JSON.parse(fs.readFileSync(rosterPath, 'utf-8'));

          function normalizeParty(party) {
            if (!party) return null;
            const s = String(party).toLowerCase();
            if (s.startsWith('r')) return 'R';
            if (s.startsWith('d')) return 'D';
            if (s.startsWith('i')) return 'I';
            return party;
          }

          const senators = legislators.filter(l =>
            Array.isArray(l.roles) && l.roles.some(r => r.type === 'sen' && r.current === true)
          );

          const records = senators.map(l => {
            const role = l.roles.find(r => r.type === 'sen' && r.current === true);
            return {
              name: \`\${l.name.first} \${l.name.last}\`,
              office: 'Senator',
              party: normalizeParty(role.party),
              state: role.state,
              missed_votes_pct: null,
              bills_introduced: null,
              bills_cosponsored: null,
              laws_enacted: null,
              committee_positions_score: null,
              bills_out_of_committee: null,
              misconduct: 0
            };
          });

          const outDir = path.join(process.cwd(), 'public');
          const outFile = path.join(outDir, 'senators-rankings.json');
          fs.mkdirSync(outDir, { recursive: true });
          fs.writeFileSync(outFile, JSON.stringify(records, null, 2), 'utf-8');
          console.log('Wrote', records.length, 'senators to', outFile);
          "
